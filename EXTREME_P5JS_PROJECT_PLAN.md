# 🌊 NEURAL FLOW - 感情と身体が紡ぐGPU粒子生命体

## 🚀 プロジェクト概要

100万個のGPUパーティクルが、視聴者の感情・身体・音声に反応して生命的に振る舞う、極限のインタラクティブアート作品。p5.js 2.0の最新機能をフル活用し、WebGL2シェーダー、ml5.js機械学習、高度なジェネラティブアルゴリズムを統合。

## 🎯 技術的極限への挑戦

### 1. **GPU Performance Extreme**
- **100万パーティクル同時描画**: WebGL2 Transform Feedbackによる超高速GPU演算
- **リアルタイム物理シミュレーション**: GPUベースの流体力学・重力・電磁場計算
- **p5.strands**: JavaScript記述可能なシェーダーでGLSL不要の高速処理

### 2. **AI/ML Integration**
- **感情認識**: ml5.js FaceAPIでリアルタイム7感情検出（喜び、悲しみ、怒り、恐怖、驚き、嫌悪、中立）
- **ポーズトラッキング**: 全身17ポイントの動きを流体場に変換
- **音声解析**: Web Audio APIとTensorFlow.jsで音声感情・音程・リズム分析
- **ジェスチャー認識**: HandPoseでの細かい手の動き検出

### 3. **Advanced Generative Algorithms**
- **Neural Flow Fields**: 感情データから生成されるベクトル場
- **Diffusion-Limited Aggregation (DLA)**: 感情に応じて成長する結晶構造
- **Reaction-Diffusion**: Gray-Scottモデルによる有機的パターン生成
- **Boids Algorithm改**: 群知能×感情×音楽の三重連動

### 4. **Visual Innovation**
- **HDR色空間**: p5.js 2.0のDisplay P3による超広色域表現
- **可変フォント**: 感情に応じて変形する有機的タイポグラフィ
- **リアルタイムレイマーチング**: SDFベースの3D空間生成
- **グリッチエフェクト**: データモッシング＋ピクセルソート

## 🎨 体験設計

### Phase 1: 静寂の海
- 初期状態：100万の粒子が静かに漂う暗い海
- 微細なPerlinノイズによる有機的な動き
- 観察者を待つ、息をひそめた生命体

### Phase 2: 覚醒
- 顔認識開始：粒子が観察者の存在を感知
- 感情に応じた色彩変化（HSL色空間での滑らかな遷移）
- 粒子密度が顔の周りに集中

### Phase 3: 共鳴
- 全身の動きに粒子が反応
- 手の動きで流体を操作可能
- 音声入力で粒子の振動・爆発・収束

### Phase 4: 進化
- 長時間のインタラクションで粒子が「学習」
- ユーザー固有のパターンを記憶・再現
- 複数人での協調的な粒子制御

## 🛠️ 技術スタック

### Core
- **p5.js 2.0**: 最新の高速レンダリング
- **WebGL 2.0**: Transform Feedback, MRT, 3Dテクスチャ
- **p5.strands**: JavaScriptシェーダー

### AI/ML
- **ml5.js**: 感情認識、ポーズ検出、手認識
- **TensorFlow.js**: カスタム音声解析モデル

### Performance
- **Web Workers**: 物理演算の並列処理
- **SharedArrayBuffer**: スレッド間高速データ共有
- **OffscreenCanvas**: バックグラウンドレンダリング

### Audio
- **Web Audio API**: リアルタイムFFT解析
- **Tone.js**: 生成音響との連動

## 📊 パフォーマンス目標

- **FPS**: 60fps維持（100万パーティクル時）
- **レイテンシ**: 感情検出→視覚反映 < 50ms
- **メモリ使用**: < 2GB（テクスチャ最適化）
- **GPU使用率**: 80%以下（熱暴走防止）

## 🌟 独自性・革新性

1. **世界初**: 100万GPUパーティクル×リアルタイムML×Web技術の統合
2. **感情の可視化**: 7感情を物理シミュレーションに変換する新手法
3. **進化するアート**: 観察者との対話で成長する生命的システム
4. **技術デモ**: p5.js 2.0の限界性能を引き出す作品

## 🚧 実装ロードマップ

### Week 1: 基盤構築
- [ ] WebGL2セットアップ＋Transform Feedback実装
- [ ] 基本パーティクルシステム（10万個でテスト）
- [ ] p5.strandsシェーダー基本実装

### Week 2: ML統合
- [ ] ml5.js感情認識・ポーズ検出統合
- [ ] リアルタイムデータストリーム最適化
- [ ] 感情→物理パラメータマッピング

### Week 3: アルゴリズム実装
- [ ] Flow Field生成システム
- [ ] DLA・Reaction-Diffusion実装
- [ ] Boids改良版の実装

### Week 4: 最適化・仕上げ
- [ ] 100万パーティクル達成
- [ ] UI/UX改善
- [ ] パフォーマンス最適化

## 🎮 操作方法

- **顔**: 感情表現で色・動きが変化
- **身体**: 全身の動きで流体操作
- **手**: 細かいジェスチャーで粒子制御
- **声**: 音量・音程でエフェクト発動
- **キーボード**: 
  - Space: リセット
  - S: スクリーンショット
  - R: 録画開始/停止
  - 1-9: プリセット切替

## 🔥 極限への挑戦指標

- ✅ GPUパーティクル数：100万個達成
- ✅ リアルタイムML：3つ以上のモデル同時実行
- ✅ 60FPS維持：最高負荷時でも
- ✅ メモリ効率：従来比1/10
- ✅ 新技術活用：p5.js 2.0機能100%カバー

---

**"感情と身体が紡ぐ、100万の光の生命体。あなたの存在が、新しい宇宙を創造する。"**